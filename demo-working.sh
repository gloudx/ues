#!/bin/bash

# –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ UES CLI
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π workflow

echo "üöÄ UES CLI - –†–∞–±–æ—á–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è"
echo "=================================="

echo ""
echo "üìÅ 1. –†–∞–±–æ—Ç–∞ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–∞–Ω–Ω—ã—Ö (Datastore)"
echo "--------------------------------------------"
echo "‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ CLI"

echo ""
echo "‚Ä¢ –û—á–∏—â–∞–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞:"
./ues-cli ds clear

echo ""
echo "‚Ä¢ –î–æ–±–∞–≤–ª—è–µ–º –∫–ª—é—á–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:"
./ues-cli ds put /config/database "postgresql://localhost:5432/mydb"
./ues-cli ds put /config/redis "redis://localhost:6379"  
./ues-cli ds put /users/admin '{"name":"Administrator","role":"admin","created":"2024-01-01"}'
./ues-cli ds put /users/john '{"name":"John Doe","role":"user","created":"2024-01-15"}'

echo ""
echo "‚Ä¢ –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –∫–ª—é—á–∞–º:"
./ues-cli ds get /config/database
./ues-cli ds get /users/admin

echo ""
echo "‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π:"
./ues-cli ds has /config/database
./ues-cli ds has /config/nonexistent

echo ""
echo "‚Ä¢ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–ª—é—á–µ–π:"
./ues-cli ds list

echo ""
echo "‚Ä¢ –°–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º /users/:"
./ues-cli ds list /users/

echo ""
echo "‚Ä¢ –£–¥–∞–ª—è–µ–º –∫–ª—é—á:"
./ues-cli ds delete /config/redis
echo "‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∫–ª—é—á —É–¥–∞–ª–µ–Ω:"
./ues-cli ds has /config/redis

echo ""
echo "‚Ä¢ –§–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π:"
./ues-cli ds list

echo ""
echo "üìö 2. –†–∞–±–æ—Ç–∞ —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è"
echo "-----------------------------------------"
echo "‚ö†Ô∏è  –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏ CLI"
echo "    –≠—Ç–æ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏."
echo ""
echo "    –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:"
echo "    1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å server mode (./cmd/server/)"
echo "    2. –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é CLI —Å–µ—Å—Å–∏—é"
echo "    3. –ò–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ Go API –Ω–∞–ø—Ä—è–º—É—é"

echo ""
echo "‚Ä¢ –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:"
echo ""
echo "  –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ –∫–æ–º–º–∏—Ç –≤ –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏:"
(
    echo "    ./ues-cli repo create-collection posts"
    echo "    ./ues-cli repo commit"
) | while read cmd; do
    echo "    $cmd"
done

echo ""
echo "‚Ä¢ –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤:"
./ues-cli repo create-collection posts
./ues-cli repo commit

echo ""
echo "üìñ 3. –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥"
echo "--------------------------------"

echo ""
echo "‚Ä¢ –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º:"
./ues-cli help

echo ""
echo "‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo ""
echo "üìù –ó–∞–º–µ—Ç–∫–∏:"
echo "  - Datastore (ds –∫–æ–º–∞–Ω–¥—ã) —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏"
echo "  - Repository (repo –∫–æ–º–∞–Ω–¥—ã) –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è"
echo "  - –î–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è server mode"
echo "  - CLI –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏ datastore"